<view class="price_adjustment_add data-v-f48466f4"><nav-bar vue-id="31fc4540-1" title="新增调价单" backgroundColor="{{[1,['#AC32E4','#7918F2',-225]]}}" tabPage="/pages/index/index" titleFont="{{['#FFF']}}" surplusHeight="{{fold?'80':'15'}}" id="navBar" class="data-v-f48466f4" bind:__l="__l" vue-slots="{{['extendSlot']}}"><view slot="extendSlot" class="data-v-f48466f4"><view hidden="{{!(fold)}}" class="data-v-f48466f4"><view class="flex flex-direction text-white margin-tb-xs margin-lr data-v-f48466f4"><view class="grid-item-container data-v-f48466f4"><text class="shop1 data-v-f48466f4">适用门店：</text><text class="shop2 data-v-f48466f4">{{currentShop}}</text></view><view class="grid-item-container data-v-f48466f4"><text class="shop1 data-v-f48466f4">生效日期：</text><text class="shop2 data-v-f48466f4">{{effectiveDate}}</text><text data-event-opts="{{[['tap',[['showDateModal',['$event']]]]]}}" class="cuIcon-calendar data-v-f48466f4" bindtap="__e"></text></view><view class="grid-item-container data-v-f48466f4"><text class="shop1 data-v-f48466f4">备       注：</text><input class="remarks shop2 data-v-f48466f4" type="text" placeholder-style="color:#dbdbdb;" placeholder="备注信息" data-event-opts="{{[['input',[['__set_model',['','remarks','$event',[]]]]]]}}" value="{{remarks}}" bindinput="__e"/></view></view></view><text data-event-opts="{{[['tap',[['foldClick',['$event']]]]]}}" class="{{['flex justify-center text-white text-bold data-v-f48466f4',fold?'cuIcon-fold':'cuIcon-unfold']}}" bindtap="__e"></text></view></nav-bar><block wx:if="{{items.length===0}}"><view class="flex justify-center flex-direction align-center padding-bottom-lg data-v-f48466f4" style="{{'height:'+(fold?'calc(100vh - 190px)':'calc(100vh - 125px)')+';'}}"><text class="cuIcon-like text-red margin-bottom tips data-v-f48466f4"></text><text class="data-v-f48466f4">空空如也...</text></view></block><block wx:else><scroll-view style="{{'height:'+(fold?'calc(100vh - 190px)':'calc(100vh - 125px)')+';'}}" scroll-y="{{true}}" scroll-with-animation="{{true}}" enable-back-to-top="{{true}}" class="data-v-f48466f4"><block wx:for="{{items}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block class="data-v-f48466f4"><view class="flex flex-direction radius margin-xs bg-white light  data-v-f48466f4"><view class="flex justify-between padding-lr-sm padding-top-sm align-center data-v-f48466f4"><text class="text-bold data-v-f48466f4">{{"品名："+item.name}}</text><text data-event-opts="{{[['tap',[['deleteItem',[item.id||item.plu]]]]]}}" class="cuIcon-delete text-blue data-v-f48466f4" bindtap="__e"></text></view><view data-event-opts="{{[['tap',[['editItem',[item.id||item.plu]]]]]}}" class="flex justify-between padding-lr-sm margin-tb-xs dashed-bottom data-v-f48466f4" bindtap="__e"><block wx:if="{{item.barcode}}"><text class="data-v-f48466f4">{{"商品条码："+item.barcode}}</text></block><block wx:if="{{item.plu}}"><text class="data-v-f48466f4">{{"plu号："+item.plu}}</text></block><text class="data-v-f48466f4">{{"规格："+item.specs}}</text></view><block wx:if="{{item.newRetailPrice&&item.newMemberPrice||item.newRetailPrice&&item.newVipPrice||item.newMemberPrice&&items[index].newVipPrice}}"><view data-event-opts="{{[['tap',[['editItem',[item.id||item.plu]]]]]}}" class="grid col-3 data-v-f48466f4" bindtap="__e"><view class="cu-item padding-left flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">原零售价</text><text class="text-lg text-cyan text-price  padding-tb-xs data-v-f48466f4" style="{{(item.retailPrice&&item.newRetailPrice?'text-decoration:line-through':'')}}">{{item.retailPrice}}</text></view><view class="cu-item padding-left flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">原会员价</text><text class="text-lg text-cyan text-price padding-tb-xs data-v-f48466f4" style="{{(item.memberPrice&&item.newMemberPrice?'text-decoration:line-through':'')}}">{{item.memberPrice}}</text></view><view class="cu-item padding-left flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">原PLUS会员价</text><text class="text-lg text-cyan text-price padding-tb-xs data-v-f48466f4" style="{{(item.vipPrice&&item.newVipPrice?'text-decoration:line-through':'')}}">{{item.vipPrice}}</text></view><view class="cu-item padding-left flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">现零售价</text><text class="text-lg text-red text-price padding-tb-xs data-v-f48466f4">{{item.newRetailPrice||'--'}}</text></view><view class="cu-item padding-left  flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">现会员价</text><text class="text-lg text-red text-price padding-tb-xs data-v-f48466f4">{{item.newMemberPrice||'--'}}</text></view><view class="cu-item padding-left flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">现PLUS会员价</text><text class="text-lg text-red text-price padding-tb-xs data-v-f48466f4">{{item.newVipPrice||'--'}}</text></view></view></block><block wx:else><block class="data-v-f48466f4"><block wx:if="{{item.newRetailPrice}}"><view data-event-opts="{{[['tap',[['editItem',[item.id||item.plu]]]]]}}" class="grid col-2 data-v-f48466f4" bindtap="__e"><view class="cu-item padding-left-lg flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">原零售价</text><text class="text-lg text-cyan text-price padding-tb-xs data-v-f48466f4" style="{{(item.retailPrice&&item.newRetailPrice?'text-decoration:line-through':'')}}">{{item.retailPrice}}</text></view><view class="cu-item padding-left-lg flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">现零售价</text><text class="text-lg text-orange text-price padding-tb-xs data-v-f48466f4">{{item.newRetailPrice}}</text></view></view></block><block wx:else><block wx:if="{{item.newMemberPrice}}"><view data-event-opts="{{[['tap',[['editItem',[item.id||item.plu]]]]]}}" class="grid col-2 data-v-f48466f4" bindtap="__e"><view class="cu-item padding-left-lg flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">原会员价</text><text class="text-lg text-cyan text-price padding-tb-xs data-v-f48466f4" style="{{(item.memberPrice&&item.newMemberPrice?'text-decoration:line-through':'')}}">{{item.memberPrice}}</text></view><view class="cu-item padding-left-lg flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">现会员价</text><text class="text-lg text-orange text-price padding-tb-xs data-v-f48466f4">{{item.newMemberPrice}}</text></view></view></block><block wx:else><view data-event-opts="{{[['tap',[['editItem',[item.id||item.plu]]]]]}}" class="grid col-2 data-v-f48466f4" bindtap="__e"><view class="cu-item padding-left-lg flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">原PLUS会员价</text><text class="text-lg text-cyan text-price padding-tb-xs data-v-f48466f4" style="{{(item.vipPrice&&item.newVipPrice?'text-decoration:line-through':'')}}">{{item.vipPrice}}</text></view><view class="cu-item padding-left-lg flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">现PLUS会员价</text><text class="text-lg text-orange text-price padding-tb-xs data-v-f48466f4">{{item.newVipPrice}}</text></view></view></block></block></block></block></view></block></block></scroll-view></block><view class="bottom cu-bar bg-white tabbar border data-v-f48466f4"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="action data-v-f48466f4" catchtap="__e"><view class="icon-label-print margin-bottom-xs data-v-f48466f4" style="font-size:38rpx;"></view>打印标签</view><view data-event-opts="{{[['tap',[['showClearModalDialog',['$event']]]]]}}" class="action data-v-f48466f4" catchtap="__e"><view class="cuIcon-delete data-v-f48466f4"><block wx:if="{{items.length>0}}"><view class="cu-tag badge data-v-f48466f4">{{"水调歌头粉色"+items.length}}</view></block></view>清空</view><view class="bg-red light submit data-v-f48466f4" data-target="DialogModalAdd" data-event-opts="{{[['tap',[['showModal',['$event']]]]]}}" catchtap="__e">添加商品</view><view data-event-opts="{{[['tap',[['computedHeight',['$event']]]]]}}" class="bg-mauve submit data-v-f48466f4" bindtap="__e">保存</view></view><view data-event-opts="{{[['tap',[['hideDateModal',['$event']]]]]}}" class="{{['cu-modal bottom-modal data-v-f48466f4',dateModal?'show':'']}}" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="cu-dialog data-v-f48466f4" catchtap="__e"><view class="flex align-center justify-between padding-lr-lg padding-tb-sm bg-white solid-bottom text-lg data-v-f48466f4"><text data-event-opts="{{[['tap',[['hideDateModal',['$event']]]]]}}" catchtap="__e" class="data-v-f48466f4">取消</text><text data-event-opts="{{[['tap',[['pickerConfirm',['$event']]]]]}}" class="text-orange data-v-f48466f4" catchtap="__e">确定</text></view><date-picker vue-id="31fc4540-2" startYear="{{2021}}" fields="second" current="{{current}}" value="{{initDate}}" data-event-opts="{{[['^change',[['handlerChange']]],['^touchstart',[['touchStart']]],['^touchend',[['touchEnd']]]]}}" bind:change="__e" bind:touchstart="__e" bind:touchend="__e" class="data-v-f48466f4" bind:__l="__l"></date-picker></view></view><view class="{{['cu-modal data-v-f48466f4',clearModalDialog?'show':'']}}"><view class="cu-dialog data-v-f48466f4"><view class="cu-bar bg-white data-v-f48466f4"><view class="content data-v-f48466f4">删除提示</view></view><view class="padding-xl bg-white text-bold data-v-f48466f4"><text class="data-v-f48466f4">此操作将清除已添加的所有商品！</text></view><view class="cu-bar bg-white data-v-f48466f4"><view data-event-opts="{{[['tap',[['hideClearModalDialog',['$event']]]]]}}" class="action margin-0 flex-sub text-green data-v-f48466f4" bindtap="__e">取消</view><view data-event-opts="{{[['tap',[['clearItems',['$event']]]]]}}" class="action margin-0 flex-sub solid-left data-v-f48466f4" bindtap="__e">确定</view></view></view></view><view class="{{['cu-modal bottom-modal data-v-f48466f4',modalName=='DialogModalAdd'?'show':'']}}"><view class="cu-dialog data-v-f48466f4"><view data-event-opts="{{[['tap',[['hideModal',['$event']]]]]}}" class="bg-white text-right padding-tb-sm padding-lr-lg data-v-f48466f4" bindtap="__e"><text class="cuIcon-close text-red text-bold text-xl data-v-f48466f4"></text></view><view class="bg-purple light text-left data-v-f48466f4"><block wx:if="{{addSign}}"><view class="cu-bar search data-v-f48466f4"><view class="search-form radius data-v-f48466f4"><text class="cuIcon-search data-v-f48466f4"></text><input adjust-position="{{false}}" placeholder="请输入商品条码、名称、拼音" confirm-type="search" data-event-opts="{{[['confirm',[['searchConfirm',['$event']]]],['input',[['__set_model',['','scanResult','$event',[]]]]]]}}" value="{{scanResult}}" bindconfirm="__e" bindinput="__e" class="data-v-f48466f4"/><text data-event-opts="{{[['tap',[['scan',['$event']]]]]}}" class="cuIcon-scan text-blue text-bold data-v-f48466f4" catchtap="__e"></text></view><view class="action text-white data-v-f48466f4"><text class="cuIcon-close  data-v-f48466f4"></text><text data-event-opts="{{[['tap',[['searchCancel',['$event']]]]]}}" bindtap="__e" class="data-v-f48466f4">取消</text><text data-event-opts="{{[['tap',[['query',['$event']]]]]}}" class="cuIcon-goods margin-left-xs data-v-f48466f4" catchtap="__e"></text></view></view></block><view class="{{['flex justify-between padding-lr-sm data-v-f48466f4',addSign?'':'padding-top-sm']}}"><text class="text-bold data-v-f48466f4">{{"品名："+(item.name||'--')}}</text><text data-event-opts="{{[['tap',[['showUnitDrawerModal',['$event']]]]]}}" class="icon-unit text-blue data-v-f48466f4" catchtap="__e"></text></view><view class="flex justify-between padding-lr-sm padding-tb-xs data-v-f48466f4"><block wx:if="{{item.plu}}"><text class="data-v-f48466f4">{{"plu号："+item.plu}}</text></block><block wx:else><text class="data-v-f48466f4">{{"商品条码："+(item.barcode||'--')}}</text></block><text class="data-v-f48466f4">{{"规格："+(item.specs||'--')}}</text></view><view class="grid col-3 padding-tb-sm margin-lr-sm radius margin-bottom-xs data-v-f48466f4" style="background-color:#7918F2;color:#fff;"><view class="cu-item padding-left-sm flex flex-direction data-v-f48466f4"><text data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="cuIcon-vip data-v-f48466f4" catchtap="__e">区域参考售价</text><text class="text-lg text-bold text-cyan text-price padding-tb-xs data-v-f48466f4">{{item.vip.referenceSalePrice||'--'}}</text></view><view class="cu-item padding-left-sm flex flex-direction data-v-f48466f4"><text data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="cuIcon-vip data-v-f48466f4" catchtap="__e">区域参考进价</text><text class="text-lg text-bold text-cyan text-price padding-tb-xs data-v-f48466f4">{{item.vip.referencePurchasePrice||'--'}}</text></view><view class="cu-item padding-left-sm flex flex-direction data-v-f48466f4"><text class="data-v-f48466f4">最近入库价</text><text class="text-lg text-bold text-price padding-tb-xs text-yellow data-v-f48466f4">{{item.storage.lastPurchasePrice||'--'}}</text></view><view class="cu-item padding-left-sm flex flex-direction data-v-f48466f4"><text class="padding-tb-xs data-v-f48466f4">库存数量</text><text class="text-lg text-bold text-pink data-v-f48466f4">{{item.storage.number||'--'}}</text></view><view class="cu-item padding-left-sm flex flex-direction data-v-f48466f4"><text class="padding-tb-xs data-v-f48466f4">库存金额</text><text class="text-lg text-bold text-pink text-price data-v-f48466f4">{{item.storage.amount||'--'}}</text></view><view class="cu-item padding-left-sm flex flex-direction data-v-f48466f4"><text class="padding-tb-xs cuIcon-question data-v-f48466f4">存货周转率</text><text class="text-lg text-bold text-green data-v-f48466f4">{{item.storage.stockTurn||'--'}}</text></view></view><view class="flex flex-direction margin-lr-sm data-v-f48466f4"><view class="data-v-f48466f4"><text class="cuIcon-sponsor margin-right-xs text-orange data-v-f48466f4"></text><text class="text-black data-v-f48466f4">零售价</text></view><view class="grid col-2 align-center data-v-f48466f4"><view class="data-v-f48466f4"><text class="data-v-f48466f4">原：</text><block wx:if="{{item.retailPrice}}"><badge vue-id="31fc4540-3" count="{{'毛利率：'+oldRetailGrossProfitRate}}" class="data-v-f48466f4" bind:__l="__l" vue-slots="{{['default']}}"><text class="text-price text-blue data-v-f48466f4" style="{{(newRetailPrice||item.newRetailPrice?'text-decoration:line-through':'')}}">{{item.retailPrice}}</text></badge></block><block wx:else><text class="text-price text-blue data-v-f48466f4">--</text></block></view><view class="flex align-center data-v-f48466f4"><text class="data-v-f48466f4">现：</text><text class="text-price data-v-f48466f4"></text><block wx:if="{{item.newRetailPrice||newRetailPrice}}"><badge class="solid-bottom text-red basis-sm data-v-f48466f4" vue-id="31fc4540-4" count="{{'毛利率：'+retailGrossProfitRate}}" bind:__l="__l" vue-slots="{{['default']}}"><input placeholder="{{item.newRetailPrice}}" type="digit" data-event-opts="{{[['blur',[['blur',['sale','$event']]]]]}}" value="{{newRetailPrice||''}}" bindblur="__e" class="data-v-f48466f4"/></badge></block><block wx:else><input class="solid-bottom text-red basis-xl data-v-f48466f4" placeholder="{{item.newRetailPrice}}" type="digit" data-event-opts="{{[['blur',[['blur',['sale','$event']]]]]}}" bindblur="__e"/></block></view></view></view><view class="flex flex-direction margin-lr-sm data-v-f48466f4"><view class="data-v-f48466f4"><text class="cuIcon-my text-orange margin-right-xs data-v-f48466f4"></text><text class="text-black data-v-f48466f4">会员价</text></view><view class="grid col-2 align-center data-v-f48466f4"><view class="data-v-f48466f4"><text class="data-v-f48466f4">原：</text><block wx:if="{{item.memberPrice}}"><badge vue-id="31fc4540-5" count="{{'毛利率：'+oldMemberGrossProfitRate}}" class="data-v-f48466f4" bind:__l="__l" vue-slots="{{['default']}}"><text class="text-price text-blue data-v-f48466f4" style="{{(newMemberPrice||item.newMemberPrice?'text-decoration:line-through':'')}}">{{item.memberPrice}}</text></badge></block><block wx:else><text class="text-price text-blue data-v-f48466f4">--</text></block></view><view class="flex align-center data-v-f48466f4"><text class="data-v-f48466f4">现：</text><text class="text-price data-v-f48466f4"></text><block wx:if="{{memberGrossProfitRate}}"><badge class="solid-bottom text-red basis-sm data-v-f48466f4" vue-id="31fc4540-6" count="{{'毛利率：'+memberGrossProfitRate}}" bind:__l="__l" vue-slots="{{['default']}}"><input placeholder="{{item.newMemberPrice}}" type="digit" data-event-opts="{{[['blur',[['blur',['member']]]],['input',[['__set_model',['','newMemberPrice','$event',[]]]]]]}}" value="{{newMemberPrice}}" bindblur="__e" bindinput="__e" class="data-v-f48466f4"/></badge></block><block wx:else><input class="solid-bottom text-red basis-xl data-v-f48466f4" placeholder="{{item.newMemberPrice}}" type="digit" data-event-opts="{{[['blur',[['blur',['member']]]],['input',[['__set_model',['','newMemberPrice','$event',[]]]]]]}}" value="{{newMemberPrice}}" bindblur="__e" bindinput="__e"/></block></view></view></view><view class="flex flex-direction margin-lr-sm data-v-f48466f4"><view class="data-v-f48466f4"><text class="cuIcon-vip text-orange margin-right-xs data-v-f48466f4"></text><text class="text-black data-v-f48466f4">PLUS会员价</text></view><view class="grid col-2 align-center data-v-f48466f4"><view class="data-v-f48466f4"><text class="data-v-f48466f4">原：</text><block wx:if="{{item.vipPrice}}"><badge vue-id="31fc4540-7" count="{{'毛利率：'+oldVipGrossProfitRate}}" class="data-v-f48466f4" bind:__l="__l" vue-slots="{{['default']}}"><text class="text-price text-blue data-v-f48466f4" style="{{(newVipPrice||item.newVipPrice?'text-decoration:line-through':'')}}">{{item.vipPrice}}</text></badge></block><block wx:else><text class="text-price text-blue data-v-f48466f4">--</text></block></view><view class="flex align-center data-v-f48466f4"><text class="data-v-f48466f4">现：</text><text class="text-price data-v-f48466f4"></text><block wx:if="{{vipGrossProfitRate}}"><badge class="solid-bottom text-red basis-sm data-v-f48466f4" vue-id="31fc4540-8" count="{{'毛利率：'+vipGrossProfitRate}}" bind:__l="__l" vue-slots="{{['default']}}"><input placeholder="{{item.newVipPrice}}" type="digit" data-event-opts="{{[['blur',[['blur',['vip']]]],['input',[['__set_model',['','newVipPrice','$event',[]]]]]]}}" value="{{newVipPrice}}" bindblur="__e" bindinput="__e" class="data-v-f48466f4"/></badge></block><block wx:else><input class="solid-bottom text-red basis-xl data-v-f48466f4" placeholder="{{item.newVipPrice}}" type="digit" data-event-opts="{{[['blur',[['blur',['vip']]]],['input',[['__set_model',['','newVipPrice','$event',[]]]]]]}}" value="{{newVipPrice}}" bindblur="__e" bindinput="__e"/></block></view></view></view><view class="flex justify-end margin-right-sm padding-tb-sm data-v-f48466f4"><block wx:if="{{addSign}}"><button data-event-opts="{{[['tap',[['addItem',['$event']]]]]}}" class="cu-btn block radius shadow confirmBtn bg-gradual-purple basis-sm data-v-f48466f4" catchtap="__e"><text class="cuIcon-add margin-right-sm data-v-f48466f4"></text>增加</button></block><button data-event-opts="{{[['tap',[['saveItem',['$event']]]]]}}" class="{{['cu-btn block radius shadow confirmBtn bg-gradual-purple margin-left-xs data-v-f48466f4',addSign?'basis-sm':'basis-lg']}}" catchtap="__e">保存</button></view></view></view></view><view data-event-opts="{{[['tap',[['hideUnitDrawerModal',['$event']]]]]}}" class="{{['cu-modal drawer-modal justify-end data-v-f48466f4',unitDrawerModal?'show':'']}}" bindtap="__e"><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="cu-dialog basis-lg bg-white data-v-f48466f4" style="{{'top:'+(140+'px')+';'+('height:'+('calc(100vh - '+140+'px)')+';')}}" catchtap="__e"><view class="padding-sm solid-bottom text-left data-v-f48466f4"><text class="cuIcon-titles text-orange data-v-f48466f4"></text><text class="data-v-f48466f4">重置价格单位</text></view><view class="units text-df data-v-f48466f4"><block wx:for="{{units}}" wx:for-item="unitItem" wx:for-index="index" wx:key="index"><block class="data-v-f48466f4"><text data-event-opts="{{[['tap',[['selectUnit',['$0'],[[['units','',index]]]]]]]}}" class="{{['padding-tb-xs padding-lr text-center margin-top-sm data-v-f48466f4',unitItem===unit?'unitSelected text-red light bg-orange':'unit bg-grey']}}" catchtap="__e">{{unitItem}}</text></block></block></view></view></view></view>