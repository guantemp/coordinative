{"version":3,"sources":["uni-app:///main.js",null,"webpack:///E:/mini/coordinative/pages/member/member.vue?2fd5","webpack:///E:/mini/coordinative/pages/member/member.vue?122f","webpack:///E:/mini/coordinative/pages/member/member.vue?c741","uni-app:///pages/member/member.vue","webpack:///E:/mini/coordinative/pages/member/member.vue?b6ec","webpack:///E:/mini/coordinative/pages/member/member.vue?4430"],"names":["createPage","Page"],"mappings":"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FA;AACA;AACA,KA9FA;AA+FA,WA/FA,qBA+FA;AACA;AACA,KAjGA;AAkGA,QAlGA,gBAkGA,IAlGA,EAkGA;AACA;AACA;AACA,OADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA,mBADA,EACA,EADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA,mBADA,EACA,EADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA,mBADA,EACA,EADA;AAEA;AACA,gBA9BA;;AAgCA,KAtIA;AAuIA,2BAvIA,mCAuIA,IAvIA,EAuIA,KAvIA,EAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9IA;AA+IA,gBA/IA,0BA+IA;AACA;AACA,uEAFA;AAGA,wCAHA,cAGA;AACA;AACA;AACA;AACA,0BADA;AAEA,4BAFA;AAGA;AACA,4DADA;AAEA,oEAFA,EAHA;;AAOA;AACA,8DADA;AAEA,wCAFA;AAGA,wCAHA;AAIA,8CAJA,EAPA;;AAaA,wCAbA;AAcA,wCAdA;AAeA,kCAfA;;AAiBA;AACA;AACA,wBADA;AAEA,kCAFA;AAGA,uBAHA;;AAKA;AACA;AACA;AACA,0BADA;AAEA,uBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA3CA;AA4CA,KA3LA;AA4LA,WA5LA,qBA4LA;AACA,gBADA,cACA;AACA;AACA;AACA;AACA;AACA,SANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjNA;;AAmNA,kBAnNA,4BAmNA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA;AACA;AACA,OAFA,EAEA,IAFA;AAGA;AACA,KA7NA,EAvDA,E;;;;;;;;;;;;;ACxSA;AAAA;AAAA;AAAA;AAAiwC,CAAgB,kuCAAG,EAAC,C;;;;;;;;;;;ACArxC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/member/member.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/member/member.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./member.vue?vue&type=template&id=f48466f4&scoped=true&\"\nvar renderjs\nimport script from \"./member.vue?vue&type=script&lang=js&\"\nexport * from \"./member.vue?vue&type=script&lang=js&\"\nimport style0 from \"./member.vue?vue&type=style&index=0&id=f48466f4&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f48466f4\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/member/member.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./member.vue?vue&type=template&id=f48466f4&scoped=true&\"","var components\ntry {\n  components = {\n    navBar: function() {\n      return import(\n        /* webpackChunkName: \"components/navBar/navBar\" */ \"@/components/navBar/navBar.vue\"\n      )\n    },\n    datePicker: function() {\n      return import(\n        /* webpackChunkName: \"components/date-picker/date-picker\" */ \"@/components/date-picker/date-picker.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      return this.$util.navTo(\"/pages/workflow/label/label\")\n    }\n\n    _vm.e1 = function($event) {\n      $event.stopPropagation()\n      return this.$util.navTo(\"/pages/workflow/price_adjustment_add\")\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./member.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./member.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"price_adjustment_add\">\r\n\t\t<navBar title=\"调价明细\" :backgroundColor=\"[1, ['#AC32E4', '#7918F2', -225]]\" tabPage=\"/pages/index/index\"\r\n\t\t\t:titleFont=\"['#FFF']\" :surplusHeight=\"fold?'80':'15'\" id=\"navBar\">\r\n\t\t\t<view slot=\"extendSlot\">\r\n\t\t\t\t<view v-show=\"fold\">\r\n\t\t\t\t\t<view class=\"flex flex-direction text-white margin-tb-xs margin-lr\">\r\n\t\t\t\t\t\t<view class=\"grid-item-container\">\r\n\t\t\t\t\t\t\t<text class=\"shop1\">适用门店：</text>\r\n\t\t\t\t\t\t\t<text class=\"shop2\">{{currentShop}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"grid-item-container\">\r\n\t\t\t\t\t\t\t<text class=\"shop1\">生效日期：</text>\r\n\t\t\t\t\t\t\t<text class=\"shop2\">{{effectiveDate}}</text>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-calendar\" @click=\"showDateModal\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"grid-item-container\">\r\n\t\t\t\t\t\t\t<text class=\"shop1\">备&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注：</text>\r\n\t\t\t\t\t\t\t<input v-model=\"remarks\" type=\"text\" class=\"remarks shop2\"\r\n\t\t\t\t\t\t\t\tplaceholder-style=\"color:#dbdbdb;\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"flex justify-center text-white text-bold\" :class=\"fold?'cuIcon-fold':'cuIcon-unfold'\"\r\n\t\t\t\t\t@click=\"foldClick\"></text>\r\n\t\t\t</view>\r\n\t\t</navBar>\r\n\r\n\t\t<!--items show-->\r\n\t\t<view v-if=\"items.length === 0\" class=\"flex justify-center flex-direction align-center padding-bottom-lg\"\r\n\t\t\t:style=\"{height: fold?'calc(100vh - 190px)':'calc(100vh - 125px)'}\">\r\n\t\t\t<text class=\"cuIcon-like text-red margin-bottom tips\"></text>\r\n\t\t\t<text>空空如也...</text>\r\n\t\t</view>\r\n\t\t<scroll-view scroll-y :scroll-with-animation=\"true\" :enable-back-to-top=\"true\"\r\n\t\t\t:style=\"{height: fold?'calc(100vh - 190px)':'calc(100vh - 125px)'}\">\r\n\t\t\t<block v-for=\"(item,index) in items\" :key=\"index\">\r\n\t\t\t\t<view class=\"flex flex-direction radius margin-xs bg-white light \">\r\n\t\t\t\t\t<view class='flex justify-between padding-lr-sm padding-top-sm align-center'>\r\n\t\t\t\t\t\t<text class=\"text-bold\">品名：{{items[index].name}}</text>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-edit text-red margin-right-xs\"\r\n\t\t\t\t\t\t\t\t@click='editItem(items[index].id||items[index].plu)'></text>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-delete text-blue\"\r\n\t\t\t\t\t\t\t\t@click=\"deleteItem(items[index].id||items[index].plu)\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-between padding-lr-sm margin-tb-xs dashed-bottom\">\r\n\t\t\t\t\t\t<text v-if=\"items[index].barcode\">商品条码：{{items[index].barcode}}</text>\r\n\t\t\t\t\t\t<text v-if=\"items[index].plu\">plu号：{{items[index].plu}}</text>\r\n\t\t\t\t\t\t<text>规格：{{items[index].specs}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tv-if=\"(items[index].retailPrice&&items[index].memberPrice)||(items[index].retailPrice&&items[index].vipPrice)||(items[index].memberPrice&&items[index].vipPrice)\"\r\n\t\t\t\t\t\tclass='grid col-3'>\r\n\t\t\t\t\t\t<view class='cu-item padding-left flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>原零售价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-cyan text-price  padding-tb-xs\">{{items[index].retailPrice.old||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>原会员价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-cyan text-price padding-tb-xs\">{{items[index].memberPrice.old||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>原VIP价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-cyan text-price padding-tb-xs\">{{items[index].vipPrice.old||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>现零售价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-red text-price padding-tb-xs\">{{items[index].retailPrice.new||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left  flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>现会员价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-red text-price padding-tb-xs\">{{items[index].memberPrice.new||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>现VIP价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-red text-price padding-tb-xs\">{{items[index].vipPrice.new||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-else class=\"grid col-2\">\r\n\t\t\t\t\t\t<view class='cu-item padding-left-lg flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>原零售价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-cyan text-price padding-tb-xs\">{{items[index].retailPrice.old}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left-lg flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>现零售价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-orange text-price padding-tb-xs\">{{items[index].retailPrice.new}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\t\t</scroll-view>\r\n\r\n\t\t<!--bootom-->\r\n\t\t<view class=\"bottom cu-bar bg-white tabbar border shop\">\r\n\t\t\t<view class=\"action\" @tap.stop=\"this.$util.navTo('/pages/workflow/label/label')\">\r\n\t\t\t\t<view class=\"icon-label-print margin-bottom-xs\" style=\"font-size: 38rpx\"></view>打印标签\r\n\t\t\t</view>\r\n\t\t\t<view class=\"action\" @tap.stop=\"clearItems\">\r\n\t\t\t\t<view class=\"cuIcon-delete\">\r\n\t\t\t\t\t<view v-if=\"items.length > 0\" class=\"cu-tag badge\">{{items.length}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t清空\r\n\t\t\t</view>\r\n\t\t\t<view class=\"bg-red light submit\" @click.stop=\"showModal\" data-target=\"DialogModalAdd\">添加商品</view>\r\n\t\t\t<view class=\"bg-mauve submit\" @click=\"computedHeight\">保存</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 日期选择 -->\r\n\t\t<view class=\"cu-modal bottom-modal\" :class=\"dateModal?'show':''\" @tap=\"hideDateModal\">\r\n\t\t\t<view class=\"cu-dialog\" @tap.stop=\"\">\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"flex align-center justify-between padding-lr-lg padding-tb-sm bg-white solid-bottom text-lg\">\r\n\t\t\t\t\t<text @tap.stop.prevent=\"hideDateModal\">取消</text>\r\n\t\t\t\t\t<text class=\"text-orange\" @tap.stop.prevent=\"pickerConfirm\">确定</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<date-picker :startYear=\"2021\" fields=\"second\" :current=\"current\" :value=\"initDate\"\r\n\t\t\t\t\t@change=\"handlerChange\" @touchstart=\"touchStart\" @touchend=\"touchEnd\">\r\n\t\t\t\t</date-picker>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 添加商品明细模态对话框 -->\r\n\t\t<view class=\"cu-modal bottom-modal\" :class=\"modalName=='DialogModalAdd'?'show':''\">\r\n\t\t\t<view class=\"cu-dialog\">\r\n\t\t\t\t<view @tap=\"hideModal\" class=\"bg-white text-right padding-tb-sm padding-lr-lg\">\r\n\t\t\t\t\t<text class=\"cuIcon-close text-red text-bold text-xl\"></text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"bg-purple light text-left\">\r\n\t\t\t\t\t<view v-if=\"addSign\" class=\"cu-bar search\">\r\n\t\t\t\t\t\t<view class=\"search-form radius\">\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-search\"></text>\r\n\t\t\t\t\t\t\t<input v-model=\"scanResult\" :adjust-position=\"false\" focus placeholder=\"请输入商品条码、名称、拼音\"\r\n\t\t\t\t\t\t\t\tconfirm-type=\"search\" @confirm=\"serchConfirm\"></input>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-scan text-blue text-bold\" @tap=\"scan\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"action text-white\">\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-close \"></text>\r\n\t\t\t\t\t\t\t<text @click=\"modalCancel\">取消</text>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-filter margin-left-xs\" @tap.stop=\"query\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-between padding-lr-sm\" :class=\"addSign?'':'padding-top-sm'\">\r\n\t\t\t\t\t\t<text class=\"text-bold\">品名：{{item.name||'--'}}</text>\r\n\t\t\t\t\t\t<text class=\"icon-unit text-blue\" @tap.stop=\"showUnitDrawerModal\"></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-between padding-lr-sm padding-tb-xs\">\r\n\t\t\t\t\t\t<text v-if=\"item.plu\">plu号：{{item.plu}}</text>\r\n\t\t\t\t\t\t<text v-else>商品条码：{{item.barcode||'--'}}</text>\r\n\t\t\t\t\t\t<text>规格：{{item.specs||'--'}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"grid col-3 bg-purple padding-tb-sm margin-lr-sm radius margin-bottom-xs\">\r\n\t\t\t\t\t\t<view class='cu-item padding-left-sm flex flex-direction'>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-vip\" @click=\"showVip\">区域参考售价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-bold text-cyan text-price padding-tb-xs\">{{item.vip.referenceSalePrice||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left-sm flex flex-direction'>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-vip\" @click=\"showVip\">区域参考进价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-bold text-cyan text-price padding-tb-xs\">{{item.vip.referencePurchasePrice||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left-sm flex flex-direction'>\r\n\t\t\t\t\t\t\t<text>最近入库价</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg text-bold text-price padding-tb-xs text-yellow\">{{item.storage.lastPurchasePrice||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left-sm flex flex-direction'>\r\n\t\t\t\t\t\t\t<text class=\"padding-tb-xs\">库存数量</text>\r\n\t\t\t\t\t\t\t<text class=\"text-lg text-bold text-pink\">{{item.storage.number||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left-sm flex flex-direction'>\r\n\t\t\t\t\t\t\t<text class=\"padding-tb-xs\">库存金额</text>\r\n\t\t\t\t\t\t\t<text class=\"text-lg text-bold text-pink text-price\">{{item.storage.amount||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class='cu-item padding-left-sm flex flex-direction'>\r\n\t\t\t\t\t\t\t<text class=\"padding-tb-xs cuIcon-question\">存货周转率</text>\r\n\t\t\t\t\t\t\t<text class=\"text-lg text-bold text-green\">{{item.storage.stockTurn||'--'}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex flex-direction margin-lr-sm\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-sponsor margin-right-xs text-orange\"></text>\r\n\t\t\t\t\t\t\t<text class=\"text-black\">零售价</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex justify-between align-center\">\r\n\t\t\t\t\t\t\t<view style=\"flex-basis:35%\">\r\n\t\t\t\t\t\t\t\t<text>原：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-price text-blue\"\r\n\t\t\t\t\t\t\t\t\t:style=\"(item.retailPrice||item.retailPrice.old)?'text-decoration:line-through':''\">{{item.retailPrice||item.retailPrice.old||'--'}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex align-center\" style=\"flex-basis:35%\">\r\n\t\t\t\t\t\t\t\t<text>现：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-price\"></text>\r\n\t\t\t\t\t\t\t\t<input :placeholder=\"item.retailPrice.new\" type=\"digit\" v-model=\"newRetailPrice\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"blur('sale')\" class=\"solid-bottom basis-xl text-red\"></input>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex align-center\" style=\"flex-basis:30%\">\r\n\t\t\t\t\t\t\t\t<text>毛利率：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-black\">{{retailGrossProfitRate}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex flex-direction margin-lr-sm\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-my text-orange margin-right-xs\"></text>\r\n\t\t\t\t\t\t\t<text class=\"text-black\">会员价</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex justify-between align-center\">\r\n\t\t\t\t\t\t\t<view style=\"width: 35%\">\r\n\t\t\t\t\t\t\t\t<text>原：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-price text-blue\"\r\n\t\t\t\t\t\t\t\t\t:style=\"(item.memberPrice||item.memberPrice.old)?'text-decoration:line-through':''\">{{item.memberPrice||item.memberPrice.old||'--'}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex align-center\" style=\"flex-basis:35%\">\r\n\t\t\t\t\t\t\t\t<text>现：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-price\"></text>\r\n\t\t\t\t\t\t\t\t<input :placeholder=\"item.memberPrice.new\" v-model=\"newMemberPrice\" type=\"digit\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"blur('member')\" class=\"solid-bottom basis-xl text-red\"></input>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex align-center\" style=\"flex-basis:30%\">\r\n\t\t\t\t\t\t\t\t<text>毛利率：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-black\">{{memberGrossProfitRate}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex flex-direction margin-lr-sm\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-vip text-orange margin-right-xs\"></text>\r\n\t\t\t\t\t\t\t<text class=\"text-black\">VIP价</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex justify-between align-center\">\r\n\t\t\t\t\t\t\t<view style=\"width: 35%\">\r\n\t\t\t\t\t\t\t\t<text>原：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-price text-blue\"\r\n\t\t\t\t\t\t\t\t\t:style=\"(item.vipPrice||item.vipPrice.old)?'text-decoration:line-through':''\">{{item.vipPrice||item.vipPrice.old||'--'}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex align-center\" style=\"flex-basis:35%\">\r\n\t\t\t\t\t\t\t\t<text>现：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-price\"></text>\r\n\t\t\t\t\t\t\t\t<input :placeholder=\"item.vipPrice.new\" v-model=\"newVipPrice\" type=\"digit\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"blur('vip')\" class=\"solid-bottom basis-xl text-red\"></input>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex align-center\" style=\"flex-basis:30%\">\r\n\t\t\t\t\t\t\t\t<text>毛利率：</text>\r\n\t\t\t\t\t\t\t\t<text class=\"text-black\">{{vipGrossProfitRate}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-end margin-right-sm padding-tb-sm\">\r\n\t\t\t\t\t\t<button v-if=\"addSign\" class=\"cu-btn block radius shadow confirmBtn bg-gradual-purple basis-sm\"\r\n\t\t\t\t\t\t\t@tap.stop=\"addItem\">\r\n\t\t\t\t\t\t\t<text class=\"cuIcon-add margin-right-sm\"></text>增加</button>\r\n\t\t\t\t\t\t<button class=\"cu-btn block radius shadow confirmBtn bg-gradual-purple margin-left-xs\"\r\n\t\t\t\t\t\t\t:class=\"addSign?'basis-sm':'basis-lg'\"\r\n\t\t\t\t\t\t\t@tap.stop=\"this.$util.navTo('/pages/workflow/price_adjustment_add')\">\r\n\t\t\t\t\t\t\t保存</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 单位选择抽屉 -->\r\n\t\t<view class=\"cu-modal drawer-modal justify-end\" :class=\"unitDrawerModal?'show':''\" @tap=\"hideUnitDrawerModal\">\r\n\t\t\t<view class=\"cu-dialog basis-lg bg-white\" @tap.stop=\"\"\r\n\t\t\t\t:style=\"[{top:140+'px',height:'calc(100vh - ' + 140 + 'px)'}]\">\r\n\t\t\t\t<view class=\"padding-sm solid-bottom text-left\">\r\n\t\t\t\t\t<text class=\"cuIcon-titles text-orange\"></text>\r\n\t\t\t\t\t<text>重置价格单位</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"units text-df\">\r\n\t\t\t\t\t<block v-for=\"(unitItem, index) in units\" :key=\"index\">\r\n\t\t\t\t\t\t<text class=\"padding-tb-xs padding-lr text-center margin-top-sm\"\r\n\t\t\t\t\t\t\t:class=\"unitItem===unit?'unitSelected text-red light bg-orange':'unit bg-grey'\"\r\n\t\t\t\t\t\t\t@tap.stop=\"selectUnit(unitItem)\">{{unitItem}}</text>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tformatDate,\r\n\t\tformatMoney\r\n\t} from '@/js_sdk/util.js';\r\n\timport catalog from '@/test/catalog_test_data.js'; //用例数据库\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfold: true,\r\n\t\t\t\tcurrentShop: '泸州市龙马潭区嘉诚超市',\r\n\t\t\t\tremarks: null,\r\n\r\n\t\t\t\tdateModal: false,\r\n\t\t\t\teffectiveDate: null,\r\n\t\t\t\tinitDate: null,\r\n\t\t\t\tconfirmFlag: true,\r\n\t\t\t\tresultDate: {},\r\n\r\n\t\t\t\tunitDrawerModal: false,\r\n\r\n\t\t\t\tmodalName: null,\r\n\t\t\t\tscanResult: null,\r\n\r\n\t\t\t\titems: [],\r\n\t\t\t\titem: null,\r\n\t\t\t\taddSign: false,\r\n\t\t\t\tunit: 'PCS',\r\n\t\t\t\tunits: [],\r\n\t\t\t\tnewRetailPrice: '',\r\n\t\t\t\tnewMemberPrice: '',\r\n\t\t\t\tnewVipPrice: '',\r\n\t\t\t\tretailGrossProfitRate: '',\r\n\t\t\t\tmemberGrossProfitRate: '',\r\n\t\t\t\tvipGrossProfitRate: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function() {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.effectiveDate = formatDate(new Date(), \"yyyy-MM-dd 00:00:00\");\r\n\t\t\t}, 300);\r\n\t\t\tthis.units = catalog.units;\r\n\t\t\tlet patt = new RegExp(/\\/?([\\u4e00-\\u9fa5]{1,2}|500g|kg|pcs)?$/);\r\n\t\t\tconsole.log(\"\".replace(patt, ''));\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\titem() {\r\n\t\t\t\tif (this.item) {\r\n\t\t\t\t\tlet patt = new RegExp(\"^([1-9][0-9]+(.[0-9]{1,4})?)/([\\u4e00-\\u9fa5]{1,2}|500g|kg|pcs)$\", \"i\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tunit() {\r\n\t\t\t\tlet pattern = new RegExp(/\\/?([\\u4e00-\\u9fa5]{1,2}|500g|kg|pcs)?$/);\r\n\t\t\t\tif (this.newRetailPrice)\r\n\t\t\t\t\tthis.newRetailPrice = this.newRetailPrice.replace(pattern, '') + \"/\" + this.unit;\r\n\t\t\t\tif (this.newMemberPrice)\r\n\t\t\t\t\tthis.newMemberPrice = this.newMemberPrice.replace(pattern, '') + \"/\" + this.unit;\r\n\t\t\t\tif (this.newVipPrice)\r\n\t\t\t\t\tthis.newVipPrice = this.newVipPrice.replace(pattern, '') + \"/\" + this.unit;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tfoldClick() {\r\n\t\t\t\tthis.fold = !this.fold;\r\n\t\t\t},\r\n\r\n\t\t\tshowDateModal() {\r\n\t\t\t\tthis.dateModal = true;\r\n\t\t\t},\r\n\t\t\thideDateModal() {\r\n\t\t\t\tthis.dateModal = false;\r\n\t\t\t},\r\n\t\t\ttouchStart() {\r\n\t\t\t\tif (this.timeout) {\r\n\t\t\t\t\tthis.confirmFlag = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttouchEnd() {\r\n\t\t\t\tif (this.timeout) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.confirmFlag = true;\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandlerChange(res) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tthis.resultDate = {\r\n\t\t\t\t\t...res\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\tpickerConfirm() {\r\n\t\t\t\tif (!this.confirmFlag) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t};\r\n\t\t\t\tthis.dateModal = false;\r\n\t\t\t\tthis.effectiveDate = formatDate(new Date(this.resultDate.value), \"yyyy-MM-dd hh:mm:ss\")\r\n\t\t\t},\r\n\r\n\t\t\thideUnitDrawerModal() {\r\n\t\t\t\tthis.unitDrawerModal = false;\r\n\t\t\t},\r\n\t\t\tshowUnitDrawerModal() {\r\n\t\t\t\tthis.unitDrawerModal = true;\r\n\t\t\t},\r\n\t\t\tselectUnit(v) {\r\n\t\t\t\tthis.unitDrawerModal = false;\r\n\t\t\t\tthis.unit = v;\r\n\t\t\t},\r\n\r\n\t\t\tshowModal(event) {\r\n\t\t\t\tthis.addSign = true;\r\n\t\t\t\tthis.modalName = event.currentTarget.dataset.target;\r\n\t\t\t\tif (this.item) {\r\n\t\t\t\t\tlet pattern = new RegExp(/\\/?([\\u4e00-\\u9fa5]{1,2}|500g|kg|pcs)?$/);\r\n\t\t\t\t\tlet cost = this.item.storage.lastPurchasePrice.replace(pattern, '');\r\n\t\t\t\t\tif (this.item.retailPrice.new)\r\n\t\t\t\t\t\tthis.retailGrossProfitRate = this.computedGrossProfitRate(cost, this.item.retailPrice.new.replace(\r\n\t\t\t\t\t\t\tpattern, ''));\r\n\t\t\t\t\tif (this.item.memberPrice.new)\r\n\t\t\t\t\t\tthis.memberGrossProfitRate = this.computedGrossProfitRate(cost, this.item.memberPrice.new.replace(\r\n\t\t\t\t\t\t\tpattern, ''));\r\n\t\t\t\t\tif (this.item.vipPrice.new)\r\n\t\t\t\t\t\tthis.vipGrossProfitRate = this.computedGrossProfitRate(cost, this.item.vipPrice.new.replace(\r\n\t\t\t\t\t\t\tpattern, ''));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thideModal(v) {\r\n\t\t\t\tthis.modalName = null;\r\n\t\t\t},\r\n\t\t\teditItem(key) {\r\n\t\t\t\tthis.addSign = false;\r\n\t\t\t\tthis.modalName = 'DialogModalAdd';\r\n\t\t\t\tconsole.log(key);\r\n\t\t\t\tfor (const i of this.items) {\r\n\t\t\t\t\tif (i.id == key || i.plu == key) {\r\n\t\t\t\t\t\tthis.item = i;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscan() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.scanCode({\r\n\t\t\t\t\tscanType: ['barCode'],\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tthat.scanResult = res.result;\r\n\t\t\t\t\t\tthat.serchConfirm();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(res) {\r\n\t\t\t\t\t\tconsole.log(JSON.stringify(res));\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tqueryCancel() {\r\n\t\t\t\tthis.scanResult = null;\r\n\t\t\t},\r\n\t\t\tshowVip() {\r\n\t\t\t\tthis.$util.toast(\"普通用户定位到省，vip用户定位到周边3-5KM\");\r\n\t\t\t},\r\n\t\t\tblur(sign) {\r\n\t\t\t\tlet pattern = new RegExp(/\\/?([\\u4e00-\\u9fa5]{1,}|500g|kg|pcs)?$/);\r\n\t\t\t\tlet cost = this.item ? this.item.storage.lastPurchasePrice.replace(pattern, '') :\r\n\t\t\t\t\t0;\r\n\t\t\t\tswitch (sign) {\r\n\t\t\t\t\tcase 'sale':\r\n\t\t\t\t\t\tif (this.newRetailPrice) {\r\n\t\t\t\t\t\t\tlet temp = this.newRetailPrice.replace(pattern, '');\r\n\t\t\t\t\t\t\tthis.retailGrossProfitRate = this.computedGrossProfitRate(cost, temp);\r\n\t\t\t\t\t\t\tthis.newRetailPrice = formatMoney(temp) + \"/\" + this.unit;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.retailGrossProfitRate = this.computedGrossProfitRate(cost, this.item.retailPrice.replace(\r\n\t\t\t\t\t\t\t\tpattern, ''));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'member':\r\n\t\t\t\t\t\tif (this.newMemberPrice) {\r\n\t\t\t\t\t\t\tlet temp = this.newMemberPrice.replace(pattern, '');\r\n\t\t\t\t\t\t\tthis.memberGrossProfitRate = this.computedGrossProfitRate(cost, temp);\r\n\t\t\t\t\t\t\tthis.newMemberPrice = formatMoney(temp) + \"/\" + this.unit;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.memberGrossProfitRate = this.computedGrossProfitRate(cost, this.item.memberPrice.replace(\r\n\t\t\t\t\t\t\t\tpattern, \"\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'vip':\r\n\t\t\t\t\t\tif (this.newVipPrice) {\r\n\t\t\t\t\t\t\tlet temp = this.newVipPrice.replace(pattern, '');\r\n\t\t\t\t\t\t\tthis.vipGrossProfitRate = this.computedGrossProfitRate(cost, temp);\r\n\t\t\t\t\t\t\tthis.newVipPrice = formatMoney(temp) + \"/\" + this.unit;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.vipGrossProfitRate = this.computedGrossProfitRate(cost, this.item.vipPrice.replace(\r\n\t\t\t\t\t\t\t\tpattern, ''));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcomputedGrossProfitRate(cost, price) {\r\n\t\t\t\tif (cost === 0 || cost === '0')\r\n\t\t\t\t\treturn '100%';\r\n\t\t\t\tif (price === 0 || price === '0' || price === '0.00' || price === '0.0')\r\n\t\t\t\t\treturn '0%';\r\n\t\t\t\tlet difference = price - cost;\r\n\t\t\t\treturn (difference / price * 100).toFixed(2) + '%';\r\n\t\t\t},\r\n\t\t\tserchConfirm() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tlet patt = new RegExp(/\\/?([\\u4e00-\\u9fa5]{1,2}|500g|kg|pcs)?$/);\r\n\t\t\t\tfor (const i of catalog.catalog) {\r\n\t\t\t\t\tif (i.barcode == that.scanResult || i.plu == that.scanResult) {\r\n\t\t\t\t\t\tthat.unit = patt.exec(i.retailPrice)[1];\r\n\t\t\t\t\t\tthat.item = {\r\n\t\t\t\t\t\t\tname: i.name,\r\n\t\t\t\t\t\t\tspecs: i.specs,\r\n\t\t\t\t\t\t\tvip: {\r\n\t\t\t\t\t\t\t\treferenceSalePrice: i.vip.referenceSalePrice,\r\n\t\t\t\t\t\t\t\treferencePurchasePrice: i.vip.referencePurchasePrice,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tstorage: {\r\n\t\t\t\t\t\t\t\tlastPurchasePrice: i.storage.lastPurchasePrice,\r\n\t\t\t\t\t\t\t\tamount: i.storage.amount,\r\n\t\t\t\t\t\t\t\tnumber: i.storage.number,\r\n\t\t\t\t\t\t\t\tstockTurn: i.storage.stockTurn,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tretailPrice: i.retailPrice,\r\n\t\t\t\t\t\t\tmemberPrice: i.memberPrice,\r\n\t\t\t\t\t\t\tvipPrice: i.vipPrice,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (i.id) {\r\n\t\t\t\t\t\t\tthat.item = {\r\n\t\t\t\t\t\t\t\tid: i.id,\r\n\t\t\t\t\t\t\t\tbarcode: i.barcode,\r\n\t\t\t\t\t\t\t\t...that.item\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (i.plu) {\r\n\t\t\t\t\t\t\tthat.item = {\r\n\t\t\t\t\t\t\t\tplu: i.plu,\r\n\t\t\t\t\t\t\t\t...that.item\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet cost = i.storage.lastPurchasePrice.replace(patt, '');\r\n\t\t\t\t\t\tthat.retailGrossProfitRate = that.computedGrossProfitRate(cost, i.retailPrice.replace(patt, ''));\r\n\t\t\t\t\t\tthat.memberGrossProfitRate = that.computedGrossProfitRate(cost, i.memberPrice.replace(patt, ''));\r\n\t\t\t\t\t\tthat.vipGrossProfitRate = that.computedGrossProfitRate(cost, i.vipPrice.replace(patt, ''));\r\n\t\t\t\t\t\t//console.log(that.item);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddItem() {\r\n\t\t\t\tfor (const i of this.items) {\r\n\t\t\t\t\tif (i.id == this.item.id || i.plu == this.item.plu) {\r\n\t\t\t\t\t\tthis.$util.toast(\"编码\" + (i.id || i.plu) + \"的商品已存在，单据不允许重复录入！\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.newRetailPrice)\r\n\t\t\t\t\tthis.item.retailPrice.new = this.newRetailPrice;\r\n\t\t\t\tif (this.newMemberPrice)\r\n\t\t\t\t\tthis.item.memberPrice.new = this.newMemberPrice;\r\n\t\t\t\tif (this.newVipPrice)\r\n\t\t\t\t\tthis.item.vipPrice.new = this.newVipPrice;\r\n\t\t\t\tthis.items.push(this.item);\r\n\t\t\t\t//console.log(this.item);\r\n\t\t\t\tthis.newRetailPrice = '';\r\n\t\t\t\tthis.newMemberPrice = '';\r\n\t\t\t\tthis.newVipPrice = '';\r\n\t\t\t\tthis.retailGrossProfitRate = '';\r\n\t\t\t\tthis.memberGrossProfitRate = '';\r\n\t\t\t\tthis.vipGrossProfitRate = '';\r\n\t\t\t},\r\n\r\n\t\t\tcomputedHeight() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconst query = uni.createSelectorQuery();\r\n\t\t\t\tquery.select('#navBar').boundingClientRect(rect => {\r\n\t\t\t\t\tthat.occupiedHeight = rect.height;\r\n\t\t\t\t}).exec();\r\n\t\t\t\tquery.select('.bottom').boundingClientRect(rect => {\r\n\t\t\t\t\tthat.occupiedHeight = that.occupiedHeight + rect.height;\r\n\t\t\t\t}).exec();\r\n\t\t\t\tthis.$util.toast(\"height:\" + this.occupiedHeight);\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n\t.price_adjustment_add {\r\n\t\twidth: 100vw;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: rgba(191, 200, 217, 0.3);\r\n\t}\r\n\r\n\t.grid-item-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\tflex-wrap: wrap;\r\n\r\n\t\t.shop1 {\r\n\t\t\twidth: 22%;\r\n\t\t}\r\n\r\n\t\t.shop2 {\r\n\t\t\tflex: 1;\r\n\t\t}\r\n\t}\r\n\r\n\t.remarks {\r\n\t\tflex: 1;\r\n\t\tborder-radius: 10rpx;\r\n\t\tbackground-color: rgba(32, 32, 32, .35);\r\n\t\tpadding: 0 20rpx;\r\n\t\tcolor: #dbdbdb;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.tips {\r\n\t\tfont-size: 164rpx;\r\n\t}\r\n\r\n\t.bottom {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\twidth: 100vw;\r\n\t}\r\n\r\n\t.units {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t\tpadding: 0rpx 12rpx;\r\n\r\n\t\t.unit {\r\n\t\t\tborder-radius: 3px;\r\n\t\t\tborder: 1rpx solid #9b9b9b;\r\n\t\t\tmargin-right: 14rpx;\r\n\t\t}\r\n\r\n\t\t.unitSelected {\r\n\t\t\tborder-radius: 3px;\r\n\t\t\tborder: 1rpx solid #fbbd08;\r\n\t\t\tmargin-right: 14rpx;\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./member.vue?vue&type=style&index=0&id=f48466f4&scoped=true&lang=scss&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./member.vue?vue&type=style&index=0&id=f48466f4&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1619971086463\n      var cssReload = require(\"D:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}