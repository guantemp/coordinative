(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/login"],{1745:function(t,e,n){"use strict";var i=n("780d"),o=n.n(i);o.a},"43c6":function(t,e,n){"use strict";(function(t){n("8da0");i(n("66fd"));var e=i(n("e6cb"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"780d":function(t,e,n){},"7df5":function(t,e,n){"use strict";n.r(e);var i=n("af7b"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},af7b:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("a34a")),o=n("f4b4"),a=s(n("cfce"));function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,o,a,s){try{var r=t[a](s),c=r.value}catch(u){return void n(u)}r.done?e(c):Promise.resolve(c).then(i,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,c,"next",t)}function c(t){r(a,i,o,s,c,"throw",t)}s(void 0)}))}}var u={mixins:[a.default],data:function(){return{agreement:!0,mobile:"",password:"",smsCode:"",verification:!1,sendCodeTitDisable:!1,sendCodeBtnDisable:!0,codeSeconds:0,countDown:59,confirmBtnDisabled:!0,method:""}},methods:{check:function(t,e,n){(0,o.checkMobile)(t)?(this.sendCodeBtnDisable=!1,this.verification&&(0,o.checkSmsCode)(e)||!this.verification&&(0,o.checkPassword)(n)?this.confirmBtnDisabled=!1:this.confirmBtnDisabled=!0):(this.sendCodeBtnDisable=!0,this.confirmBtnDisabled=!0)},convert:function(){this.verification=!this.verification,this.verification?this.method="byCode":this.method="byPassword",this.check(this.mobile,this.smsCode,this.password)},sendSmsCode:function(){var t=this;return c(i.default.mark((function e(){return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/auth/v1/sms",{params:{mobile:t.mobile}}).then((function(e){200==e.data.code?(t.$util.toast("验证码已发送",2e3,!1,"success"),t.handleSmsCodeTime(t.countDown)):t.$util.toast(e.data.message)})).catch((function(e){console.log(e),t.$util.toast("服务器离线，请稍后再试！")}));case 2:case"end":return e.stop()}}),e)})))()},handleSmsCodeTime:function(t){var e=this,n=setInterval((function(){0===t?(clearInterval(n),e.sendCodeTitDisable=!1):(e.codeSeconds=t,e.sendCodeTitDisable=!0,t--)}),1e3)},login:function(){var e=this;return c(i.default.mark((function n(){return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.agreement){n.next=3;break}return e.$util.toast("请阅读并同意用户服务协议及隐私权协议"),n.abrupt("return");case 3:return n.next=5,e.$http.post("/auth/v1/auth",{username:e.mobile,password:e.password,code:e.smsCode,method:e.method}).then((function(n){n.data.code?e.$util.toast(n.data.message):(e.$util.toast("登录成功，欢迎回来！"),e.$store.commit("login",n.data),setTimeout((function(){t.navigateBack()}),1500))})).catch((function(t){e.$util.toast("服务器离线，请稍后再试！")}));case 5:case"end":return n.stop()}}),n)})))()},navBack:function(){t.navigateBack()},checkAgreement:function(){this.agreement=!this.agreement}}};e.default=u}).call(this,n("543d")["default"])},df93:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(t){return this.$util.navTo("/pages/user/password")},t.e1=function(t){return this.$util.navTo("/pages/user/register")},t.e2=function(t){return this.$util.navTo("/pages/public/not_implemented")},t.e3=function(t){return this.$util.navTo("/pages/public/not_implemented")})},a=[]},e6cb:function(t,e,n){"use strict";n.r(e);var i=n("df93"),o=n("7df5");for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("1745");var s,r=n("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"70164ebe",null,!1,i["a"],s);e["default"]=c.exports}},[["43c6","common/runtime","common/vendor"]]]);